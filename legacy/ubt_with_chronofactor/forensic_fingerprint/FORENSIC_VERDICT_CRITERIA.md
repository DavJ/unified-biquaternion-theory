# Forensic verdict criteria (pre-registered)

This document defines **pass/fail criteria** for the CMB comb “forensic fingerprint” tests.
The goal is to prevent post-hoc tuning ("fit until it looks good") and to make results
**court/peer-review defensible**.

## Definitions

### Test statistic
Let **S** be the *comb score* produced by `cmb_comb.py` for a given dataset and variant.
The score must be a **single scalar** per run (higher = more “comb-like”).

### Null hypothesis (H0)
H0: The observed score **S_obs** is consistent with a non-comb stochastic CMB spectrum
after applying the same preprocessing pipeline.

Operationally, H0 is implemented as a Monte Carlo (MC) ensemble of scores
`{S_i}` computed from **surrogate datasets** generated by the pipeline
(e.g. phase randomization / spectrum scrambling / bootstrap — whichever is implemented
for the selected variant).

### p-value and sigma
Compute:

* `p = (1 + #{i : S_i >= S_obs}) / (1 + N)` (one-sided)
* `sigma = Phi^{-1}(1 - p)` where `Phi^{-1}` is the inverse CDF of a standard normal.

> Note: sigma is a convenience mapping. **p-value is the primary quantity.**

## Pre-registered knobs (must be fixed before running)

These must be selected **before** looking at results:

1. Dataset(s): Planck PR3 TT, WMAP9 TT (and any others)
2. Variant: A/B/C/D (as defined in `variant_fingerprints.md`)
3. Multipole range:
   * Planck: `ell_min_planck=30`, `ell_max_planck=1500`
   * WMAP: `ell_min_wmap=30`, `ell_max_wmap=800`
4. MC samples: default `N=10000`
5. Random seed: default `42`

If any of these change, you must treat it as a **new experiment**.

## Decision thresholds

### Fail
* `p >= 0.05` (sigma ≲ 1.64)

Interpretation: no evidence for a comb signal beyond typical chance fluctuations.

### Weak evidence (exploratory)
* `0.05 > p >= 0.0027` (about 1.64σ to 3σ)

Interpretation: interesting, but **not** “evidence” in HEP/precision cosmology sense.
Requires replication and stress tests.

### Evidence
* `0.0027 > p >= 5.7e-7` (about 3σ to 5σ)

Interpretation: strong anomaly; requires independent replication (WMAP/ACT/SPT) and
robustness checks.

### Discovery-grade
* `p < 5.7e-7` (≥ 5σ)

Interpretation: “discovery-grade” statistical strength **for this test statistic**.
Still requires:
* independent replication,
* sensitivity analysis,
* and ruling out pipeline artifacts.

## Mandatory robustness checks (required for “Evidence” and above)

1. **Hold-out ranges**: rerun with `ell_max_planck=1200` and `ell_max_planck=1800`.
   The signal must not disappear under minor range changes.
2. **Alternative surrogate generator** (if available): show similar p-values.
3. **Dataset replication**: Planck and WMAP must agree qualitatively.
4. **Ablation**: disable each pipeline stage one by one to verify the signal is not
   created by a single step.

## Reporting template

Every run must output a `VERDICT.md` containing:

* dataset filenames + SHA256 manifest validation status
* variant + ell ranges + N + seed
* S_obs, p, sigma
* plots / artifacts produced by the run
* short conclusion under the thresholds above
